//esm-shim-webpack-plugin-imports
!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n(require("lodash"));else if("function"==typeof define&&define.amd)define(["lodash"],n);else{var t="object"==typeof exports?n(require("lodash")):n(e._);for(var o in t)("object"==typeof exports?exports:e)[o]=t[o]}}(self,(e=>(()=>{"use strict";var n={9847:n=>{n.exports=e}},t={};function o(e){var i=t[e];if(void 0!==i)return i.exports;var r=t[e]={exports:{}};return n[e](r,r.exports,o),r.exports}o.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return o.d(n,{a:n}),n},o.d=(e,n)=>{for(var t in n)o.o(n,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},o.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{o.r(i),o.d(i,{accessibility:()=>ie,account:()=>re,application:()=>l,components:()=>g,controllers:()=>T,environment:()=>se,errors:()=>pe,fonts:()=>C,history:()=>E,info:()=>b,language:()=>S,menu:()=>M,mobile:()=>te,pages:()=>B,pagesGroup:()=>W,permissions:()=>de,responsiveLayout:()=>oe,routers:()=>_,siteMembers:()=>V,siteSegments:()=>L,theme:()=>q,tpa:()=>$,transactions:()=>ce,vfs:()=>ne,waitForChangesApplied:()=>c,wixapps:()=>ae});var e=o(9847),n=o.n(e);const t="registerError_",r=Object.freeze({EXTENSION:"extension",DEFAULT:"default"}),p=e=>e.context===r.EXTENSION;function a(e,n,t){let{isRequired:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{isRequired:!1};const i=p(e)?null==n?void 0:n[t]:null==e?void 0:e[t];if(o&&void 0===i)throw new Error("option ".concat(t," is required"));return i}const s=(e,n)=>new Promise((t=>{e.waitForChangesApplied((()=>t(n)))})),c=(e,n)=>e.waitForChangesApplied(n),d=(e,n,t)=>n.runInContext(e,t),u=(e,n)=>!!p(e)||n===e.appDefinitionId,l={install:function(e,t,o,i){return new Promise(((o,r)=>{const{appDefinitionId:p,originInfo:a,editorType:s,sourceTemplateId:c,isSilent:u}=i;if(!p)return void r(new Error("options must contain appDefinitionId"));const l={appDefinitionId:n().get(t,"appDefinitionId")},f={origin:{initiator:"APP",type:s,info:a?n().assign({},a,l):l}};c&&(f.sourceTemplateId=c),u&&(f.isSilent=!0),d(t.appDefinitionId,e,(()=>e.platform.provision(p,f).then(o,r)))}))},uninstall:function(e,n,t){let{appDefinitionId:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((t=>{const i=a(n,{appDefinitionId:o},"appDefinitionId",{isRequired:!0});d(n.appDefinitionId,e,(()=>e.platform.uninstall(i))),e.waitForChangesApplied(t)}))},isApplicationInstalled:function(e,n,t,o){let{appDefinitionId:i}=o;return new Promise(((t,o)=>{i?d(n.appDefinitionId,e,(()=>t(e.platform.isAppActive(i)))):o(new Error("options must contain appDefinitionId"))}))},registerToCustomEvents:function(e,n,t,o){let{eventTypes:i,appDefinitionId:r}=o;const p=a(n,{appDefinitionId:r},"appDefinitionId",{isRequired:!0});return d(n.appDefinitionId,e,(()=>e.platform.registerAppToCustomEventsByAppDefId(p,i)))},appStudioWidgets:{changeVariation:function(e,n,t,o){let{componentRef:i,variationId:r}=o;return new Promise((t=>{d(n.appDefinitionId,e,(()=>e.appStudioWidgets.changeVariation(i,r,t)))}))},changePreset:function(e,n,t,o){let{componentRef:i,stylePresetId:r,layoutPresetId:p}=o;return d(n.appDefinitionId,e,(()=>e.appStudioWidgets.presets.change(i,r,p)))},addWidget:function(e,n,t,o){let{containerRef:i,widgetId:r,variationId:p,layout:s,installationType:c,appDefinitionId:u}=o;return new Promise(((t,o)=>{const l=a(n,{appDefinitionId:u},"appDefinitionId",{isRequired:!0});d(n.appDefinitionId,e,(()=>e.appStudioWidgets.addWidget(l,r,{containerRef:i,variationId:p,layout:s,installationType:c,onSuccess:t,onError:o})))}))},getPreset:function(e,n,t,o){let{componentRef:i}=o;return d(n.appDefinitionId,e,(()=>e.appStudioWidgets.presets.get(i)))},props:{get:function(e,n,t,o){let{widgetRef:i}=o;return d(n.appDefinitionId,e,(()=>e.appStudioWidgets.props.get(i)))},set:function(e,n,t,o){let{widgetRef:i,newProps:r,shouldFetchData:p}=o;return d(n.appDefinitionId,e,(()=>e.appStudioWidgets.props.set(i,r,{shouldFetchData:p})))}},designVariables:{get:function(e,n,t,o){let{widgetRef:i}=o;return d(n.appDefinitionId,e,(()=>e.appStudioWidgets.designVariables.get(i,i)))},set:function(e,n,t,o){let{widgetRef:i,newValues:r}=o;return d(n.appDefinitionId,e,(()=>e.appStudioWidgets.designVariables.set(i,i,r)))}}},sessionState:{update:function(e,n,t,o){let{stateMap:i}=o;return d(n.appDefinitionId,e,(()=>e.platform.sessionState.update(i))),s(e)}},livePreview:{refresh:function(e,n,t){let{source:o,shouldFetchData:i,appDefinitionId:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const p=a(n,{appDefinitionId:r},"appDefinitionId",{isRequired:!0});return e.platform.livePreview.refresh({apps:[p],source:o||"EditorSDK",shouldFetchData:i})}}},f=(e,n)=>"wysiwyg.viewer.components.RefComponent"===e.components.getType(n),g={add:function(e,t,o){let{componentDefinition:i,pageRef:r,customId:p,optionalIndex:a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise(((o,s)=>{n().has(i,"componentType")||s(new Error("componentDefinition must contain componentType"));const u=e.components.buildDefaultComponentStructure(i.componentType);n().merge(u,i);const l=d(t.appDefinitionId,e,(()=>e.components.add(r,u,p,a)));c(e,(()=>o(l)))}))},addAndAdjustLayout:function(e,t,o){let{componentDefinition:i,pageRef:r,customId:p,optionalIndex:a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise(((o,s)=>{n().has(i,"componentType")||s(new Error("componentDefinition must contain componentType"));const u=e.components.buildDefaultComponentStructure(i.componentType);n().merge(u,i);const l=d(t.appDefinitionId,e,(()=>e.components.addAndAdjustLayout(r,u,p,a)));c(e,(()=>o(l)))}))},remove:function(e,n,t,o){let{componentRef:i}=o;e.viewMode.get()===e.viewMode.VIEW_MODES.MOBILE?d(n.appDefinitionId,e,(()=>e.mobile.hiddenComponents.hide(i))):d(n.appDefinitionId,e,(()=>e.components.remove(i)))},get:function(e,t,o,i){let{componentRefs:r,properties:p=[],appDefinitionId:s}=i;const c=n().compact(n().isArray(r)?r:[r]);return n().transform(c,((o,i)=>{const r={componentRef:i},c=!p.includes("components"),d=e.components.serialize(i,null,c);if(n().assign(r,n().pick(d,p)),n().includes(p,"sdkType")&&(r.sdkType=e.wixCode.getCompSdkType(i)),n().includes(p,"connections")&&(r.connections=e.platform.controllers.connections.get(i)),n().includes(p,"style")&&(r.style=e.components.style.get(i)),n().includes(p,"role")){const o=e.platform.controllers.connections.get(i),p=a(t,{appDefinitionId:s},"appDefinitionId",{isRequired:!0}),c=n().find(o,(n=>{const t=e.components.data.get(n.controllerRef);return((null==t?void 0:t.appDefinitionId)||(null==t?void 0:t.applicationId))===p}));r.role=n().get(c,"role")}o.push(r)}),[])},serialize:function(e,n,t,o){let{componentRef:i,maintainIdentifiers:r=!1}=o;return e.components.serialize(i,null,!1,r)},isRepeatedComponent:function(e,n,t,o){let{componentRef:i}=o;return e.components.isRepeatedComponent(i)},migrate:function(e,n,t,o){let{componentRef:i,componentDefinition:r}=o;return e.components.migrate(i,r)},getAllComponents:function(e){return e.deprecatedOldBadPerformanceApis.components.getAllComponents()},getPage:function(e,n,t,o){let{componentRef:i}=o;return e.components.getPage(i)},getById:function(e,n,t,o){let{id:i}=o;return e.components.get.byId(i)},getChildren:function(e,n,t,o){let{componentRef:i,recursive:r=!1,fromDocument:p=!1}=o;return(p?e.deprecatedOldBadPerformanceApis.components.getChildrenFromFull:e.deprecatedOldBadPerformanceApis.components.getChildren)(i,r)},getAncestors:function(e,n,t,o){let{componentRef:i}=o;return e.deprecatedOldBadPerformanceApis.components.getAncestors(i)},getType:function(e,n,t,o){let{componentRef:i}=o;return e.components.getType(i)},isFullWidth:function(e,n,t,o){let{componentRef:i}=o;if(!i)throw new Error("options must include componentRef property");return e.components.is.fullWidth(i)},setFullWidth:function(e,n,t,o){let{componentRef:i,fullWidth:r,margins:p}=o;if(!i)throw new Error("options must include componentRef property");if("boolean"!=typeof r)throw new Error("options must include fullWidth boolean property");return new Promise((n=>{if(r){const{left:n,right:t}=p||{},o={left:Object.assign({vw:0},n),right:Object.assign({vw:0},t)};e.components.layout.setDock(i,o)}else e.components.layout.unDock(i);c(e,n)}))},buildDefaultComponentStructure:function(e,n,t,o){let{componentType:i}=o;return e.components.buildDefaultComponentStructure(i)},findAllByType:function(e,n,t,o){let{componentType:i}=o;return e.components.get.byType(i)},code:{getNickname:function(e,n,t,o){let{componentRef:i}=o;if(!i)throw new Error("options must include componentRef property");return e.components.code.getNickname(i)},setNickname:function(e,n,t,o){let{componentRef:i,nickname:r}=o;if(!i)throw new Error("options must include componentRef property");if(!r)throw new Error("options must include nickname property");const p=e.components.code.validateNickname(i,r);if("VALID"!==p)throw new Error(p);return e.components.code.setNickname(i,r)}},behaviors:{getRuntimeState:function(e,n,t,o){let{componentRef:i}=o;return e.components.behaviors.getRuntimeState(i)},execute:function(e,n,t,o){let{componentRef:i,behaviorName:r,behaviorParams:p}=o;return d(n.appDefinitionId,e,(()=>e.components.behaviors.execute(i,r,p))),s(e)},get:function(e,n,t,o){let{componentRef:i}=o;return e.components.behaviors.get(i)},update:function(e,n,t,o){let{componentRef:i,behavior:r}=o;return e.components.behaviors.update(i,r)},remove:function(e,n,t,o){let{componentRef:i,behaviorName:r,actionName:p}=o;return e.components.behaviors.remove(i,r,p)}},properties:{get:function(e,n,t,o){let{componentRef:i}=o;return e.components.properties.get(i)},update:function(e,n,t,o){let{componentRef:i,props:r}=o;d(n.appDefinitionId,e,(()=>e.components.properties.update(i,r)))}},data:{get:function(e,n,t,o){let{componentRef:i}=o;return e.components.data.get(i)},update:function(e,n,t,o){let{componentRef:i,data:r}=o;d(n.appDefinitionId,e,(()=>e.components.data.update(i,r)))},updateInLanguage:function(e,n,t,o){let{componentRef:i,data:r,languageCode:p}=o;d(n.appDefinitionId,e,(()=>e.components.data.updateInLang(i,r,p)))}},layout:{get:function(e,n,t,o){let{componentRef:i}=o;return e.components.layout.get(i)},update:function(e,n,t,o){let{componentRef:i,layout:r}=o;d(n.appDefinitionId,e,(()=>e.components.layout.update(i,r)))}},style:{get:function(e,n,t,o){let{componentRef:i}=o;return e.components.style.get(i)},update:function(e,n,t,o){let{componentRef:i,style:r}=o;d(n.appDefinitionId,e,(()=>e.components.style.setCustom(i,null,r)))},updateFull:function(e,n,t,o){let{componentRef:i,style:r}=o;d(n.appDefinitionId,e,(()=>e.components.style.update(i,r)))}},stylable:{mergeStylesheets:function(e,n,t){return e.components.stylable.mergeStylesheets(n,t)},update:function(e,n,t,o){let{componentRef:i,style:r}=o;d(n.appDefinitionId,e,(()=>e.components.stylable.update(i,r)))}},design:{get:function(e,n,t,o){let{componentRef:i}=o;return e.components.design.get(i)},update:function(e,n,t,o){let{componentRef:i,designItem:r,design:p,retainCharas:a}=o;d(n.appDefinitionId,e,(()=>e.components.design.update(i,p||r,a)))}},modes:{showComponentOnlyOnPagesGroup:function(e,n,t,o){let{componentPointer:i,componentRef:r=i,pagesGroupPointer:p}=o;d(n.appDefinitionId,e,(()=>e.components.modes.showComponentOnlyOnPagesGroup(r,p)))},activateComponentMode:function(e,n,t,o){let{componentRef:i,modeId:r}=o;d(n.appDefinitionId,e,(()=>e.components.modes.activateComponentMode(i,r)))},applyCurrentToAllModes:function(e,n,t,o){let{componentRef:i}=o;d(n.appDefinitionId,e,(()=>e.components.modes.applyCurrentToAllModes(i)))},getModes:function(e,n,t,o){let{componentRef:i}=o;return e.components.modes.getModes(i)}},arrangement:{moveToIndex:function(e,n,t,o){let{componentRef:i,index:r}=o;return d(n.appDefinitionId,e,(()=>e.components.arrangement.moveToIndex(i,r)))},getIndex:function(e,n,t,o){let{componentRef:i}=o;if(!i)throw new Error("options must include componentRef property");return e.components.arrangement.getCompIndex(i)}},refComponents:{removeAllOverrides:function(e,n,t,o){let{componentRef:i}=o;return new Promise(((t,o)=>{if(f(e,i))if(u(n,e.components.data.get(i).appDefinitionId))try{d(n.appDefinitionId,e,(()=>{e.components.refComponents.removeAllOverrides(i),c(e,(()=>t()))}))}catch(e){o(e)}else o("The component with id '".concat(i.id,"' doesn't belong to this app."));else o("This method remove overrides only for a refComponent.")}))},getAllAppRefComponents:function(e,n,t){let{appDefinitionId:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=e.deprecatedOldBadPerformanceApis.components.getAllComponentsFromFull(),r=a(n,{appDefinitionId:o},"appDefinitionId",{isRequired:!0});return i.filter((n=>{const t=e.components.data.get(n)||{};return"WidgetRef"===t.type&&t.appDefinitionId===r}))},isRefComponentCollapsed:function(e,t,o,i){let{componentRef:r}=i;return"COLLAPSED"===n().get(e.components.properties.get(r),"ghost")},getCollapsedRefComponents:function(e,n,t,o){let{componentRef:i,includeInnerCollapsed:r}=o;if(!f(e,i))throw new Error("This method get collapsed components only for a refComponent.");if(!u(n,e.components.data.get(i).appDefinitionId))throw new Error("The component with id '".concat(i.id,"' doesn't belong to this app."));const p=[i];if(r){const n=e.deprecatedOldBadPerformanceApis.components.getChildren(i,!0);p.push(...n.filter((n=>f(e,n))))}return p.reduce(((n,t)=>{const o=e.components.refComponents.getAllGhostRefComponentsPrimaryConnection(t);return o&&Object.keys(o).forEach((i=>{var r;n.push({refHost:t,componentRef:e.components.get.byId(i),role:null===(r=o[i])||void 0===r?void 0:r.role})})),n}),[])},collapseReferredComponent:function(e,n,t,o){let{componentRef:i}=o;return new Promise(((t,o)=>{if(!e.components.refComponents.isReferredComponent(i))return o("The component with id '".concat(i.id,"' isn't a referred component."));const r=e.components.refComponents.getRefHostCompPointer(i);if(!u(n,e.components.data.get(r).appDefinitionId))return o("The component with id '".concat(i.id,"' doesn't belong to this app."));try{d(n.appDefinitionId,e,(()=>e.components.remove(i))),e.waitForChangesApplied(t)}catch(e){return o(e)}}))},getTemplateComponent:(e,n,t,o)=>{let{componentRef:i}=o;return e.components.refComponents.getTemplateCompPointer(i)},getHostComponentRef:(e,n,t,o)=>{let{componentRef:i}=o;return e.components.refComponents.getRefHostCompPointer(i)},expandReferredComponent:function(e,n,t,o){let{componentRef:i}=o;return new Promise(((t,o)=>{if(!e.components.refComponents.isReferredComponent(i))return o("The component with id '".concat(i.id,"' isn't a referred component."));const r=e.components.refComponents.getRefHostCompPointer(i);if(!u(n,e.components.data.get(r).appDefinitionId))return o("The component with id '".concat(i.id,"' doesn't belong to this app."));try{d(n.appDefinitionId,e,(()=>e.components.refComponents.unGhostifyComponent(i))),e.waitForChangesApplied(t)}catch(e){return o(e)}}))},hasOverrides:function(e,n,t,o){let{componentRef:i}=o;return new Promise(((t,o)=>{if(f(e,i))if(u(n,e.components.data.get(i).appDefinitionId)){try{d(n.appDefinitionId,e,(()=>e.components.refComponents.hasOverridesToBeRemoved(i)))}catch(e){o(e)}t()}else o("The component with id '".concat(i.id,"' doesn't belong to this app."));else o("This method checks overrides only for a refComponent.")}))}}},m="platform.components.AppController",I="platform.components.AppWidget",D={SITE_HEADER:!0,SITE_FOOTER:!0},y=(e,t)=>n()(t).thru(e.components.getAncestors).reverse().tail().map("id").head();function R(e,n,t,o,i){let{appDefinitionId:r}=n;const p=t?t.id:null,a=n=>!p||!e.pages.popupPages.isPopup(p)||"masterPage"!==e.components.getPage(n).id;return(i?e.deprecatedOldBadPerformanceApis.components.getAllComponentsFromFull:e.deprecatedOldBadPerformanceApis.components.getAllComponents)(p,(n=>{const t=e.components.getType(n);return function(e){return e===m||e===I}(t)&&e.components.data.get(n).applicationId===r&&a(n)||o&&e.tpa.isTpaByCompType(t)&&e.components.data.get(n).appDefinitionId===r&&a(n)}))}function P(e,t,o,i){const r=R(e,t,o,i),p=n()(r).map(e.components.refComponents.getTemplateCompPointer).compact().keyBy("id").value();return n()(r).reject((e=>{let{id:n}=e;return p[n]})).map((e=>({controllerRef:e}))).value()}const v=function(e,n,t){let{pageRef:o=e.pages.getFocusedPage(),appDefinitionId:i,includeTPAWidget:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return P(e,{appDefinitionId:a(n,{appDefinitionId:i},"appDefinitionId",{isRequired:!0})},o,r)};function h(e,t,o,i){let{controllerRef:r,scope:p="COMPONENT"}=i;const a=e.tpa.isTpaByCompType(e.components.getType(r)),s=e.components.data.get(r);if(a)return function(e,n){let{controllerRef:t,compData:o,scope:i}=n,r={};e.tpaV2.data.getPublicData(o.applicationId,t,(e=>{if(e.error)throw new Error(e.error);r=e}));const p=e.platform.controllers.getName(t);return{type:o.widgetId,config:r[i],displayName:p}}(e,{controllerRef:r,compData:s,scope:p});const c=e.platform.controllers.settings.get(r);return{type:n().get(s,"controllerType"),config:c,displayName:e.platform.controllers.getName(r)}}function w(e,n,t,o){let{controllerRef:i}=o;return e.platform.controllers.connections.getControllerConnections(i)}const T={listControllers:v,listAllControllers:function(e,n,t){let{appDefinitionId:o,includeTPAWidget:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return P(e,{appDefinitionId:a(n,{appDefinitionId:o},"appDefinitionId",{isRequired:!0})},null,i)},listConnectableControllers:function(e,t,o,i){let{componentRef:r,appDefinitionId:p,includeTPAWidget:s}=i;const c=e.components.getPage(r),d={appDefinitionId:a(t,{appDefinitionId:p},"appDefinitionId",{isRequired:!0})},u=R(e,d,c,s,!0),l=y(e,r);return n()(u).filter((t=>function(e,n,t,o){const i=e.components.getPage(o);if("masterPage"===i.id){const n=y(e,o);return!(n&&!D[n])||t===n}return n===i.id}(e,n().get(c,"id"),l,t))).filter((n=>function(e,n,t){return e.components.getType(t)!==I||e.components.isDescendantOfComp(n,t)}(e,r,n))).map((e=>({controllerRef:e}))).value()},getControllerConnections:w,listControllerConnections:w,listConnections:function(e,t,o,i){let{componentRef:r}=i;const p=e.platform.controllers.connections.get(r);return n().reject(p,{type:"WixCodeConnectionItem"})},listConnectedComponents:function(e,n,t,o){let{controllerRef:i}=o;return e.platform.controllers.connections.getConnectedComponents(i)},connect:function(e,n,t,o){let{connectToRef:i,controllerRef:r,role:p,connectionConfig:a,isPrimary:s,subRole:c}=o;return d(n.appDefinitionId,e,(()=>e.platform.controllers.connections.connect(i,r,p,a,s,c))),{connectToRef:i,controllerRef:r,role:p,subRole:c}},disconnect:function(e,n,t,o){let{connectToRef:i,controllerRef:r,role:p}=o;return d(n.appDefinitionId,e,(()=>e.platform.controllers.connections.disconnect(i,r,p)))},getData:h,saveConfiguration:function(e,n,t,o){let{controllerRef:i,config:r,scope:p="COMPONENT"}=o;const a=e.components.getType(i);return e.tpa.isTpaByCompType(a)?new Promise(((t,o)=>d(n.appDefinitionId,e,(()=>e.tpa.data.setMultiple(i,r,p,(e=>e.error?o(new Error(e.error.message)):t(e))))))):d(n.appDefinitionId,e,(()=>e.platform.controllers.settings.set(i,r)))},setDisplayName:function(e,n,t,o){let{controllerRef:i,name:r}=o;return d(n.appDefinitionId,e,(()=>e.platform.controllers.setName(i,r)))},setState:function(e,n,t,o){let{state:i}=o;return d(n.appDefinitionId,e,(()=>e.platform.controllers.setState(i)))},setExternalId:function(e,n,t,o){let{controllerRef:i,externalId:r}=o;return d(n.appDefinitionId,e,(()=>e.platform.controllers.settings.setExternalId(i,r))),s(e)},getExternalId:function(e,n,t,o){let{controllerRef:i}=o;return e.platform.controllers.settings.getExternalId(i)},findAllByType:function(e,n,t,o){let{controllerType:i,pageRef:r,appDefinitionId:p}=o;const a=v(e,n,t,{pageRef:r||null,appDefinitionId:p}),s=[];for(const n of a)h(e,0,0,n).type===i&&s.push(n);return s}},C={getFontsOptions:function(e){return e.fonts.getFontsOptions()}},E={add:function(e,n,t,o){let{label:i,params:r}=o;return new Promise((n=>c(e,(()=>{e.history.add(i,{__appParams:r}),n()}))))}};function A(e,n,t){let{appDefinitionId:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=a(n,{appDefinitionId:o},"appDefinitionId",{isRequired:!0}),r="wix-code"===n.appDefinitionId?e.wixCode.getClientSpec().appDefinitionId:i;return e.tpa.app.getDataByAppDefId(r).instance}const b={getSiteId:function(e){return e.generalInfo.getSiteId()},getMetaSiteId:function(e){return e.generalInfo.getMetaSiteId()},getPublicUrl:function(e){return e.generalInfo.getPublicUrl()},isSitePublished:function(e){return e.generalInfo.isSitePublished()},getLanguage:function(e){return e.generalInfo.getLanguage()},getRegionalLanguage:function(e){return e.generalInfo.getRegionalLanguage()},isSiteSaved:function(e){return!e.generalInfo.isFirstSave()&&!e.generalInfo.isDraft()},isHttpsEnabled:function(e){return e.generalInfo.isHttpsEnabled()},getAppInstance:A,getAppInstancePayload:function(e,n,t){const o=A(e,n,t);return o?function(e){try{const n=e.split(".")[1];return JSON.parse(atob(n))}catch(n){throw new Error("Unable to parse app's instance token. Token - ".concat(e))}}(o):null},getAppInstanceId:function(e,n,t){let{appDefinitionId:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=a(n,{appDefinitionId:o},"appDefinitionId",{isRequired:!0}),r="wix-code"===n.appDefinitionId?e.wixCode.getClientSpec().appDefinitionId:i;return e.tpa.app.getDataByAppDefId(r).instanceId},getCurrency:function(e){return e.generalInfo.getCurrency()},getTimeZone:function(e){return e.generalInfo.getTimeZone()},getUserId:function(e){return e.generalInfo.getUserInfo().userId},getUserInfo:function(e){return e.generalInfo.getUserInfo()},getVendorProductId:function(e,n,t,o){const i=null==o?void 0:o.appDefinitionId;if(!i&&p(n))throw new Error("options must contain appDefinitionId");const r=e.platform.getAppDataByAppDefId(i||n.appDefinitionId);return null==r?void 0:r.vendorProductId},getRegion:function(e){return e.generalInfo.getLocale()},getArtifactsUrls:function(e,n,t){return e.generalInfo.getArtifactsUrl(t)},getArtifactOverrides:function(e){return e.generalInfo.getArtifactOverrides()},getSiteDisplayName:function(e){return e.siteDisplayName.get()},getStageViewMode:function(e){return e.documentMode.getComponentViewMode()},getSiteMap:function(e){return e.tpa.getSiteMap()},getUserGEO:function(e){return e.generalInfo.getGeo()},getAppRevisionOverrides:function(e){return e.generalInfo.getAppRevisionOverrides()}},S={add:function(e,n,t,o){let{languageCode:i}=o;return d(n.appDefinitionId,e,(()=>e.language.add(i))),s(e)},current:{set:function(e,n,t,o){let{languageCode:i}=o;return d(n.appDefinitionId,e,(()=>e.language.current.set(i)))},get:function(e,n){return d(n.appDefinitionId,e,(()=>e.language.current.get()))}},component:{getTranslations:function(e,n,t,o){let{componentRef:i}=o;return e.language.component.getTranslations(i)},data:{remove:function(e,n,t,o,i){return d(n.appDefinitionId,e,(()=>e.multilingual.components.data.remove(o,i)))}}},original:{get:function(e){return e.language.original.get()}},setLanguages:function(e,n){return e.language.init(n)},getTranslationLanguages:function(e){return e.language.getFull()},autoTranslate:()=>{throw new Error("not implemented for this editor")},multilingual:{isEnabled:function(e){return e.language.multilingual.isEnabled()},languages:{remove:function(e,n,t,o){return d(n.appDefinitionId,e,(()=>e.multilingual.languages.remove(o)))},removeAll:function(e,n){return d(n.appDefinitionId,e,(()=>e.multilingual.languages.removeAll()))}}}},O=["MEMBERS_SUB_MENU","MEMBERS_LOGIN_MENU","MEMBERS_LOGIN_ICONS_MENU","CUSTOM_MAIN_MENU","CUSTOM_MENU"],M={create:function(e,t,o,i){let{menuData:r,customId:p,appDefinitionId:s}=i;const c=a(t,{appDefinitionId:s},"appDefinitionId",{isRequired:!0}),u=n().assign({appDefinitionId:c},r);return d(t.appDefinitionId,e,(()=>e.menu.create(u,p)))},connect:function(e,n,t,o){let{menuCompPointer:i,menuId:r}=o;d(n.appDefinitionId,e,(()=>e.menu.connect(i,r)))},update:function(e,n,t,o){let{menuId:i,menuData:r}=o;d(n.appDefinitionId,e,(()=>e.menu.update(i,r)))},remove:function(e,n,t,o){let{menuId:i}=o;d(n.appDefinitionId,e,(()=>e.menu.remove(i)))},addItem:function(e,n,t,o){let{menuId:i,menuItem:r}=o;d(n.appDefinitionId,e,(()=>e.menu.addItem(i,r)))},getById:function(e,n,t,o){let{menuId:i}=o;return e.menu.getById(i)},getDefaultMenuId:function(e,n){return d(n.appDefinitionId,e,(async()=>{const n=(await e.menu.getAll()).filter((e=>!O.includes(e.id)));if(0===n.length)return null;const t=n.find((e=>"MAIN_MENU"===e.menuType)),o=n[0];return(t||o).id}))}};function F(e,t,o,i,r){let{pageRef:p,pageLink:a}=i;const c=n().get(p,"id")||a;if(c)return d(t.appDefinitionId,e,(()=>e.pages.navigateTo(c))),s(e,r)}const x="openPopup";function N(e,n,t,o){let{pageRef:i}=o;return e.pages.data.get(i.id)}const B={navigateTo:F,setState:function(e,n,t,o){let{state:i}=o;d(n.appDefinitionId,e,(()=>e.platform.pages.setState(i)))},getCurrent:function(e){return e.pages.getReference(e.pages.getFocusedPageId())},getPrimary:function(e){return e.pages.getReference(e.pages.getPrimaryPageId())},getHomePage:function(e){const n=e.homePage.get();return e.components.get.byId(n)},add:function(e,n,t,o){let{title:i,definition:r,shouldAddMenuItem:p,shouldNavigateToPage:a=!0}=o;const s=d(n.appDefinitionId,e,(()=>e.pages.add(i,r,p)));return a?F(e,n,0,{pageRef:s},s):s},getPageData:N,isDynamicPage:function(e,n,t,o){let{pageRef:i}=o;const r=e.routers.getRouterRef.byPage(i);return Boolean(r)},rename:function(e,n,t,o){let{pageRef:i,title:r}=o;return d(n.appDefinitionId,e,(()=>e.pages.data.update(i.id,{title:r})))},duplicate:function(e,n,t,o){let{pageId:i,shouldAddMenuItem:r,shouldDuplicatePageCode:p}=o;return d(n.appDefinitionId,e,(()=>e.pages.duplicate(i,r,p)))},data:{get:N,getAll:function(e){return e.pages.getPagesData()},update:function(e,n,t,o){let{pageRef:i,data:r}=o;d(n.appDefinitionId,e,(()=>e.pages.data.update(i.id,r)))}},pageUriSEO:{convertPageNameToUrl:function(e,n,t,o){let{title:i}=o;return e.pages.data.pageUriSEO.convertPageNameToUrl(i)}},serialize:function(e,n,t,o){let{pageRef:i,maintainIdentifiers:r=!1}=o;return e.pages.serialize(i.id,r)},permissions:{hasPassword:function(e,n,t,o){let{pageRef:i}=o;return e.pages.permissions.hasPassword(i.id)},updatePagePassword:function(e,n,t,o){let{pageRef:i,plainPassword:r}=o;d(n.appDefinitionId,e,(()=>e.pages.permissions.updatePassword(i.id,r)))},removePagePassword:function(e,n,t,o){let{pageRef:i}=o;d(n.appDefinitionId,e,(()=>e.pages.permissions.removePassword(i.id)))},duplicatePagePassword:function(e,n,t,o){let{destinationPageRef:i,sourcePageRef:r}=o;return new Promise(((t,o)=>{d(n.appDefinitionId,e,(()=>e.pages.permissions.duplicatePagePassword(i.id,r.id,t,o)))}))},duplicateGroupsPermissions:function(){return new Promise((e=>{e()}))}},remove:function(e,n,t,o){let{pageRef:i}=o;return new Promise(((t,o)=>{const r=e.pages.data.get(i.id);if(!r)return void o("page with id '".concat(i.id,"' doesn't exist"));if(!u(n,r.managingAppDefId))return void o("page with id '".concat(i.id,"' can not be deleted. page is not managed by this application"));const{id:p}=e.pages.getCurrentPage();if(p===i.id)return void o("It is not allowed to delete current page (".concat(i.id,"), please navigate to another page"));const a=e.homePage.get();if(i.id!==a)if(r.tpaApplicationId)o("It is not allowed to delete a section page '(".concat(i.id,")'"));else{try{d(n.appDefinitionId,e,(()=>e.pages.remove(i.id)))}catch(e){return void o(e)}t()}else o("It is not allowed to delete homePage (".concat(i.id,"), please set a new page as homePage and try again"))}))},getApplicationPages:function(e,n,t){let{appDefinitionId:o,includeUnmanaged:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=a(n,{appDefinitionId:o},"appDefinitionId",{isRequired:i});return r?e.pages.getPagesData().filter((e=>{let{managingAppDefId:n,appDefinitionId:t}=e;return n===r||i&&t===r})):[]},popupPages:{add:(e,n,t,o)=>{let{title:i,definition:r,shouldNavigateToPage:p=!0}=o;const a=d(n.appDefinitionId,e,(()=>e.pages.popupPages.add(i,r)));return p?F(e,n,0,{pageRef:a},a):a},addConnected:(e,t,o,i)=>{let{title:r,definition:p,controllerType:s,popupRole:u,shouldNavigateToPage:l=!0,appDefinitionId:f}=i;return new Promise((o=>{d(t.appDefinitionId,e,(()=>{const i=e.pages.popupPages.add(r,p),d=a(t,{appDefinitionId:f},"appDefinitionId",{isRequired:!0}),g=n().defaultsDeep({data:{controllerType:s,name:s,applicationId:d}},e.components.buildDefaultComponentStructure("platform.components.AppController")),m=e.components.add(i,g);c(e,(()=>{const n=e.deprecatedOldBadPerformanceApis.components.getChildren(i);e.platform.controllers.connections.connect(n[0],m,u,{},!0),o(l?F(e,t,0,{pageRef:i},i):i)}))}))}))},open:(e,t,o,i)=>{let{popupRef:r}=i;const p=n().get(r,"id");p&&d(t.appDefinitionId,e,(()=>e.pages.popupPages.open(p)))},close:(e,n)=>{d(n.appDefinitionId,e,(()=>e.pages.popupPages.close()))},isPopupOpened:e=>e.pages.popupPages.isPopupOpened(),getApplicationPopups:function(e,n,t){let{appDefinitionId:o,includeUnmanaged:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=a(n,{appDefinitionId:o},"appDefinitionId",{isRequired:!1});return r?e.pages.popupPages.getDataList().filter((e=>{let{managingAppDefId:n,appDefinitionId:t}=e;return n===r||i&&t===r})):[]},updateBehavior:(e,n,t,o)=>{const i=function(e,n){if(n.name===x)return e.actions.getDefinition("load");throw new Error("Behavior is not supported: ".concat(n.name))}(e,o.behavior),r=function(e,n){if(n.name===x)return{...e.behaviors.getDefinition(x),params:n.params};throw new Error("Behavior is not supported: ".concat(n.name))}(e,o.behavior);e.pages.getPageIdList(!0).map((n=>e.components.get.byId(n))).filter((n=>e.behaviors.get(n).some((e=>{let{behavior:n}=e;return(null==n?void 0:n.targetId)===o.popupRef.id})))).forEach((n=>e.behaviors.update(n,i,o.popupRef,r)))}}},W={create:function(e,n,t,o){let{groupName:i,appDefinitionId:r}=o;const p=a(n,{appDefinitionId:r},"appDefinitionId",{isRequired:!0}),s=d(n.appDefinitionId,e,(()=>e.pagesGroup.create({groupName:i,appDefinitionId:p})));return Promise.resolve(s)},addPageToPagesGroup:function(e,n,t,o){let{pagesGroupPointer:i,pageId:r}=o;d(n.appDefinitionId,e,(()=>e.pagesGroup.addPageToPagesGroup(i,r)))},getById:function(e,n,t,o){let{pagesGroupId:i}=o;return e.pagesGroup.getById(i)},getByGroupName:function(e,n,t,o){let{groupName:i}=o;return e.pagesGroup.getByGroupName(i)},getAll:function(e){return e.pagesGroup.getAll()},remove:function(e,n,t,o){let{pagesGroupPointer:i}=o;d(n.appDefinitionId,e,(()=>e.pagesGroup.remove(i)))}};function G(e,t,o,i){let{routerRef:r}=i;const p=e.routers.get.byRef(r);if(p&&u(t,p.appDefinitionId))return{id:p.id,prefix:p.prefix,config:p.config,pages:n()(p.pages).invertBy().map(((n,t)=>({pageRef:e.pages.getReference(t),pageRoles:n}))).value()}}function k(e,n,t,o){let{prefix:i}=o;const r=e.routers.getRouterRef.byPrefix(i);if(!r)return r;const p=e.routers.get.byRef(r);return p&&u(n,p.appDefinitionId)?r:void 0}const _={add:function(e,n,t){let{prefix:o,config:i,group:r,appDefinitionId:p}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((t=>{const s={appDefinitionId:a(n,{appDefinitionId:p},"appDefinitionId",{isRequired:!0}),prefix:o,config:i};r&&(s.group=r),t(d(n.appDefinitionId,e,(()=>e.routers.add(s))))}))},remove:function(e,n,t,o){let{routerRef:i}=o;const r=e.routers.get.byRef(i);r&&u(n,r.appDefinitionId)&&d(n.appDefinitionId,e,(()=>e.routers.remove(i)))},get:G,getAll:function(e,t,o){let{appDefinitionId:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=a(t,{appDefinitionId:i},"appDefinitionId",{isRequired:!0});return n().map(e.routers.get.byApp(r),(n=>{let{prefix:o}=n;const i=k(e,t,0,{prefix:o});return G(e,t,0,{routerRef:i})}))},update:function(e,n,t,o){let{routerRef:i,prefix:r,config:p}=o;return new Promise(((t,o)=>{const a=e.routers.get.byRef(i);if(a&&u(n,a.appDefinitionId)){const o=((e,n)=>{if(!n)return n;const{replacers:t,rules:o,roleVariations:i,...r}=n;return{...r,..."replacers"in e&&{replacers:e.replacers},..."roleVariations"in e&&{roleVariations:e.roleVariations},..."rules"in e&&{rules:e.rules}}})(a.config,p);d(n.appDefinitionId,e,(()=>e.routers.update(i,{prefix:r,config:o}))),t()}else o()}))},getByPage:function(e,n,t,o){let{pageRef:i}=o;const r=e.routers.getRouterRef.byPage(i);if(!r)return r;const p=e.routers.get.byRef(r);return p&&u(n,p.appDefinitionId)?r:void 0},getByPrefix:k,isValidPrefix:function(e,n,t,o){let{prefix:i,appDefinitionId:r}=o;const p=a(n,{appDefinitionId:r},"appDefinitionId",{isRequired:!0});return e.routers.isValidPrefixByAppDefId(p,i)},getCurrentDynamicRouting:function(e){const n=e.routers.getCurrentInnerRoute();if(n.isDynamic){const t=e.routers.get.byId(n.routerId);return n.prefix=t.prefix,delete n.isDynamic,n}return null},pages:{add:function(e,n,t,o){let{routerRef:i,pageTitle:r,pageRoles:p}=o;return new Promise((t=>{const o=e.routers.get.byRef(i);o&&u(n,o.appDefinitionId)||t(),t(d(n.appDefinitionId,e,(()=>e.routers.pages.add(i,r,p))))}))},delete:function(e,n,t,o){let{routerRef:i,pageRef:r}=o;return new Promise(((t,o)=>{const p=e.routers.get.byRef(i);p&&u(n,p.appDefinitionId)?(d(n.appDefinitionId,e,(()=>e.pages.remove(r.id))),t()):o()}))},connect:function(e,n,t,o){let{routerRef:i,pageRef:r,pageRoles:p,slug:a}=o;const s=e.routers.get.byRef(i);s&&u(n,s.appDefinitionId)&&d(n.appDefinitionId,e,(()=>e.routers.pages.connect(i,r,p,a?{innerRoute:a}:void 0)))},disconnect:function(e,n,t,o){let{routerRef:i,pageRef:r}=o;const p=e.routers.get.byRef(i);p&&u(n,p.appDefinitionId)&&d(n.appDefinitionId,e,(()=>e.routers.pages.disconnect(i,r)))},move:function(e,n,t,o){let{fromRouterRef:i,toRouterRef:r,pageRef:p}=o;const a=e.routers.get.byRef(i),s=e.routers.get.byRef(r);a&&s&&u(n,s.appDefinitionId)&&u(n,a.appDefinitionId)&&d(n.appDefinitionId,e,(()=>e.routers.pages.move(p,i,r)))},listConnectablePages:function(e){return e.routers.pages.listConnectablePages()}}},L={getFooter:function(e){return e.siteSegments.getFooter()},getHeader:function(e){return e.siteSegments.getHeader()},getPagesContainer:function(e){return e.siteSegments.getPagesContainer()},getSiteStructure:function(e){return e.siteSegments.getSiteStructure()}},U=["CHECKBOX","NOTE"],V={getCustomSignInPageId:function(e){return e.siteMembers.getCustomSignInPageId()},getCustomSignupPageId:function(e){return e.siteMembers.getCustomSignupPageId()},setCustomSignInPageId:function(e,n,t){return e.siteMembers.setCustomSignInPageId(t)},setCustomSignupPageId:function(e,n,t){return e.siteMembers.setCustomSignupPageId(t)},getCustomNoPermissionsPageId:function(e){return e.siteMembers.getCustomNoPermissionsPageId()},setCustomNoPermissionsPageId:function(e,n,t){return e.siteMembers.setCustomNoPermissionsPageId(t)},getPrivacyNoteType:function(e){return e.siteMembers.getPrivacyNoteType()},setPrivacyNoteType:function(e,n){if(U.includes(n))return e.siteMembers.setPrivacyNoteType(n);const t=U.join(", ");throw new Error("Invalid privacy note type. Available options: ".concat(t))}},q={styles:{getAll:function(e){return e.theme.styles.getAll()}},colors:{getAll:function(e){return e.theme.colors.getAll()}},fonts:{getMap:function(e){return e.theme.fonts.getMap()}}},j={TYPE:{SECTION:"tpaSection",WIDGET:"tpaWidget",PLATFORM_ONLY:"platformOnly"}},Y={TYPE:{PLATFORM:"PLATFORM",STUDIO:"STUDIO",STUDIO_WIDGET:"STUDIO_WIDGET",PAGE_OUT_OF_IFRAME:"PAGE_OUT_OF_IFRAME",WIDGET_OUT_OF_IFRAME:"WIDGET_OUT_OF_IFRAME",WIDGET:"WIDGET",PAGE:"PAGE"}},H=e=>{var n,t;return(null==e||null===(n=e.appFields)||void 0===n||null===(n=n.appService)||void 0===n?void 0:n.components)||(null==e||null===(t=e.data)||void 0===t?void 0:t.components)||(null==e?void 0:e.components)||[]},z=function(e){return(e=>{var n,t;const o=H(e);return(null==e||null===(n=e.appFields)||void 0===n||null===(n=n.platform)||void 0===n?void 0:n.platformOnly)||(null===(t=o.find((e=>"PLATFORM"===e.type||"PLATFORM"===e.compType)))||void 0===t||null===(t=t.data)||void 0===t?void 0:t.platformOnly)})(e)?j.TYPE.PLATFORM_ONLY:(e=>Object.values((null==e?void 0:e.widgets)||{}).some((e=>!!e.appPage&&!e.appPage.hidden)))(e)?j.TYPE.SECTION:(e=>H(e).some((e=>e.type===Y.TYPE.STUDIO||e.compType===Y.TYPE.STUDIO_WIDGET)))(e)?j.TYPE.PLATFORM_ONLY:(e=>Object.values((null==e?void 0:e.widgets)||{}).some((e=>!e.appPage&&!!e.default)))(e)?j.TYPE.WIDGET:(e=>{var n;return Boolean(null==e||null===(n=e.appFields)||void 0===n?void 0:n.platform)||H(e).some((e=>e.type===Y.TYPE.PLATFORM||e.compType===Y.TYPE.PLATFORM))})(e)?j.TYPE.PLATFORM_ONLY:j.TYPE.WIDGET},X=(e,n)=>{const{appDefinitionId:t,applicationId:o}=e.components.data.get(n)||{};return t||o};function K(e,n,t,o){return e.tpa.appMarket.getDataAsync(o).then((e=>{if(!e||e.error)throw new Error("Application with ".concat(o," appDefinitionId does not exist."));return e}))}function Z(e,t,o,i){return new Promise(((o,r)=>{const p=n().clone(i);n().get(i,"appDefinitionId")?i.appDefinitionId!==e.platform.editorApps.WIX_CODE.appDefId?K(e,0,0,i.appDefinitionId).then((a=>{if("Wix"===a.by){if(p.callback=function(p){if(p.onError)r(new Error(p.onError));else if(t=e.tpa.app.getDataByAppDefId(i.appDefinitionId),p.page){const i=e.pages.data.get(p.page.id);o({instanceId:n().get(t,"instanceId"),pageRef:p.page,pageUriSEO:n().get(i,"pageUriSEO"),title:n().get(i,"title")})}else o({instanceId:n().get(t,"instanceId")})},e.tpa.app.isInstalled(i.appDefinitionId)&&!function(e){var n;return z(e)===j.TYPE.WIDGET&&(null==e||null===(n=e.widgets)||void 0===n?void 0:n.every((e=>!e.addOnlyOnce)))}(a))return void r(new Error("Application already installed."));d(t.appDefinitionId,e,(()=>{const s=function(e){var n;return 1===(null===(n=e.componentTypes)||void 0===n?void 0:n.length)&&e.componentTypes.includes(Y.TYPE.PLATFORM)}(i)&&e.tpa.app.hasEditorPlatformPart(a);if(z(a)===j.TYPE.PLATFORM_ONLY||s){const p={appDefinitionId:n().get(t,"appDefinitionId")},a=i.originInfo?n().assign({},i.originInfo,p):p,s={origin:{initiator:"APP",type:i.editorType,info:a}};return i.sourceTemplateId&&(s.sourceTemplateId=i.sourceTemplateId),i.isSilent&&(s.isSilent=!0),e.platform.provision(i.appDefinitionId,s).then(o,r)}return e.tpa.app.add(i.appDefinitionId,p)}))}else r(new Error("Can't add a non Wix application"))})).catch(r):e.wixCode.provision({onSuccess:o,onError:r}):r(new Error("options must contain appDefinitionId"))}))}const J=(e,n)=>t=>{t.error?n(new Error(t.error.message)):e(t)};function Q(e){return()=>{console.warn("Editor SDK call is not implemented for this editor, method: ".concat(e))}}const $={isAppSectionInstalled:function(e,t,o){let{sectionId:i,appDefinitionId:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise(((o,a)=>{if(!i)return void a(new Error("options must contain sectionId"));let s=t.appDefinitionId;if(!p(t)||r){if(r){const t=e.tpa.app.getDataByAppDefId(r);s=n().get(t,"appDefinitionId")}o(e.tpaV2.section.isSectionInstalledByTpaPageId(s,i))}else a(new Error("options must contain appDefinitionId"))}))},isApplicationInstalled:function(e,n,t){let{appDefinitionId:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise(((n,t)=>{o?n(e.tpa.app.isInstalled(o)):t(new Error("options must contain appDefinitionId"))}))},setStyleParams:function(e,t,o,i){return new Promise(((o,r)=>{if(!i||!i.compRef)return void r("options must include compRef property");if(!i||!i.styleParams||!n().isArray(i.styleParams))return void r("options must include styleParams property and styleParams must be an array");const p=X(e,i.compRef);p?u(t,p)?d(t.appDefinitionId,e,(()=>e.tpa.style.setCompStyleParam(i.compRef,i.styleParams,(()=>o())))):r("It is not allowed to set style params for other applications, application ".concat(t.appDefinitionId," cannot set applications ").concat(p," components style params")):r("could not find component data for the given component ref")}))},getStyleParams:function(e,n,t,o){return new Promise(((t,i)=>{if(!o||!o.compRef)return void i("options must include compRef property");const r=X(e,o.compRef);if(!r)return void i("could not find component data for the given component ref");if(!u(n,r))return void i("It is not allowed to get the style params from other applications, application ".concat(n.appDefinitionId," cannot get applications ").concat(r," components style params"));const{style:p}=e.tpa.style.getByComp(o.compRef)||{};t(p)}))},getSiteTextPresets:function(e,n,t,o){if(!o||!o.compRef)throw new Error("options must include compRef property");const{siteTextPresets:i}=e.tpa.style.get(o.compRef.id);return i},getSiteColors:function(e,n,t,o){if(!o||!o.compRef)throw new Error("options must include compRef property");const{siteColors:i}=e.tpa.style.get(o.compRef.id);return i},getPageRefByTPAPageId:function(e,n,t,o){const i=e.pages.getPagesData().find((e=>(null==e?void 0:e.tpaPageId)===o.tpaPageId));if(i)return e.pages.getReference(i.id)},data:{setAppPublicData:function(e,t,o,i){return new Promise(((o,r)=>{d(t.appDefinitionId,e,(()=>{i&&i.key&&!n().isUndefined(i.value)?e.tpaV2.data.set(t.appDefinitionId,i.key,i.value,J(o,r)):r(new Error("options must include: key, value"))}))}))},getAppPublicData:function(e,n,t,o){return new Promise(((t,i)=>{d(n.appDefinitionId,e,(()=>{o&&o.key?e.tpaV2.data.app.get(n.appDefinitionId,o.key,J(t,i)):i(new Error("options must include: key"))}))}))},getAll:function(e,n,t,o){return new Promise(((n,t)=>{if(!o||!o.compRef)return void t(new Error("options must include compRef property"));const i=X(e,o.compRef);void 0!==i?e.tpaV2.data.getPublicData(i,o.compRef,J(n,t)):t(new Error("could not find component data for the given component ref"))}))},set:function(e,n,t,o){return new Promise(((t,i)=>{if(!o||!o.compRef)return void i(new Error("options must include compRef property"));if(!o.key)return void i(new Error("options must include key property"));const r=X(e,o.compRef);r?u(n,r)?d(n.appDefinitionId,e,(()=>e.tpa.data.set(o.compRef,o.key,o.value,o.scope||"COMPONENT",J(t,i)))):i(new Error("it is not allowed to set the public data from other applications, application ".concat(n.appDefinitionId," cannot set applications ").concat(r," public data"))):i(new Error("could not find component data for the given component ref"))}))},remove:function(e,n,t,o){return new Promise(((t,i)=>{if(!o||!o.compRef)return void i(new Error("options must include compRef property"));if(!o.key)return void i(new Error("options must include key property"));const r=X(e,o.compRef);r?u(n,r)?d(n.appDefinitionId,e,(()=>e.tpa.data.remove(o.compRef,o.key,o.scope||"COMPONENT",J(t,i)))):i(new Error("it is not allowed to remove the public data from other applications, application ".concat(n.appDefinitionId," cannot remove applications ").concat(r," public data"))):i(new Error("could not find component data for the given component ref"))}))}},add:{application:Z,component:function(e,t,o,i){return new Promise(((o,r)=>{const a=n().clone(i);if(n().get(i,"componentType")){if(!i.appDefinitionId){if(p(t))return void r(new Error("options must contain appDefinitionId"));a.appDefinitionId=t.appDefinitionId}if("WIDGET"===i.componentType){if(!n().isObject(i.widget))return void r(new Error("options must contain a widget object"));a.widget.tpaWidgetId=i.widget.widgetId}else if("PAGE"===i.componentType){if(!n().isObject(i.page))return void r(new Error("options must contain a page object"));if(i.page.isHidden&&!n().isBoolean(i.page.isHidden))return void r(new Error("isHidden param should be of type boolean"))}a.callback=function(t){if(t.onError)r(new Error(t.onError));else if("WIDGET"===i.componentType)o({compId:t.comp.id});else{const i=e.pages.data.get(t.page.id);o({compId:t.sectionId,pageRef:t.page,pageUriSEO:n().get(i,"pageUriSEO"),title:n().get(i,"title")})}},d(t.appDefinitionId,e,(()=>e.tpa.comp.add(a)))}else r(new Error("options must contain componentType"))}))}},app:{getDataByAppDefId:function(e,n,t,o){return e.tpa.app.getDataByAppDefId(o)},getAppMarketDataByAppDefId:K,getAppDataByAppDefId:function(e,n,t,o){return e.platform.getAppDataByAppDefId(o)},getAllCompsByApplicationId:function(e,n,t,o){return e.tpa.app.getAllCompsByApplicationId(o)},getAllComps:function(e,n,t,o){return e.tpaV2.app.getAllComps(o)},refreshApp:function(e,n){let{appDefinitionId:t}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=a(n,{appDefinitionId:t},"appDefinitionId",{isRequired:!0}),i=e.tpaV2.app.getAllComps([o]);return d(n.appDefinitionId,e,(()=>e.tpa.app.refreshApp(i)))},delete:function(e,n){let{appDefinitionId:t}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=a(n,{appDefinitionId:t},"appDefinitionId",{isRequired:!0});return new Promise((t=>{d(n.appDefinitionId,e,(()=>e.platform.uninstall(o))),e.waitForChangesApplied(t)}))},add:Z},widgetPlugins:{getWidgetSlots:Q("document.tpa.widgetPlugins.getWidgetSlots"),addWidgetPlugin:Q("document.tpa.widgetPlugins.addWidgetPlugin"),removeWidgetPlugin:Q("document.tpa.widgetPlugins.removeWidgetPlugin")}};function ee(e){return{name:e.name,fullPath:e.location,isDirectory:e.directory}}const ne={listChildren:function(e,t,o,i){const r=e.wixCode.fileSystem,p=r.getVirtualDescriptor(i.path,!0);return r.getChildren(p).then((e=>n().map(e,ee)))},readFile:function(e,n,t,o){const i=e.wixCode.fileSystem,r=i.getVirtualDescriptor(o.path,!1);return i.readFile(r)},writeFile:function(e,n,t,o){const i=e.wixCode.fileSystem,r=i.getVirtualDescriptor(o.path,!1);return d(n.appDefinitionId,e,(()=>i.writeFile(r,o.content)))},deleteFile:function(e,n,t,o){const i=e.wixCode.fileSystem,r=i.getVirtualDescriptor(o.path,!1);return d(n.appDefinitionId,e,(()=>i.deleteItem(r)))},flush:function(e,n){return d(n.appDefinitionId,e,(()=>e.wixCode.fileSystem.flush()))},getViewerInfo:function(e){return e.wixCode.fileSystem.getViewerInfo()}},te={hiddenComponents:{show:function(e,n,t,o){let{componentRef:i}=o;const r=e.pages.getFocusedPageId();d(n.appDefinitionId,e,(()=>e.mobile.hiddenComponents.show(i.id,r)))}}},oe={get:function(e,n,t,o){let{componentRef:i}=o;return e.responsiveLayout.get(i)},update:function(e,n,t,o){let{componentRef:i,responsiveLayout:r}=o;d(n.appDefinitionId,e,(()=>e.responsiveLayout.update(i,r)))}},ie={getSkipToContent:function(e){return e.accessibility.skipToContent.get()},setSkipToContent:function(e,n,t,o){return d(n.appDefinitionId,e,(()=>e.accessibility.skipToContent.set(o)))},getVisualFocus:function(e){return e.accessibility.visualFocus.get()},setVisualFocus:function(e,n,t,o){return d(n.appDefinitionId,e,(()=>e.accessibility.visualFocus.set(o)))},getAutoDomReorder:function(e){return e.accessibility.autoDomReorder.get()},setAutoDomReorder:function(e,n,t,o){return d(n.appDefinitionId,e,(()=>e.accessibility.autoDomReorder.set(o)))}},re={isCoBranded:function(e){return e.account.isCoBranded()}},pe={registerToErrorThrownForContext:function(e,n){const o=t+n.appDefinitionId;e.platform.requestAPIFromWorker(o).then((t=>{let{callback:o}=t;return e.registerToErrorThrownForContext(n.appDefinitionId,o)}))},unRegisterToErrorThrownForContext:function(e,n){const o=t+n.appDefinitionId;e.platform.requestAPIFromWorker(o).then((t=>{let{callback:o}=t;return e.unRegisterToErrorThrownForContext(n.appDefinitionId,o)}))}},ae={migrate:{convertAppPage:function(e,n,t,o){let{pageRef:i}=o;return e.wixapps.migrate.convertAppPage(i)}}},se={screen:{getScreenResolution:function(e){return e.env.screen.getResolution()}}},ce={runAndWaitForApproval:async function(e,n,t,o){return await e.transactions.runAndWaitForApproval(o,{appDefinitionId:n.appDefinitionId})}},de={isGroupsPermissionsGranted:function(){return!0},isCustomPermissionsGranted:function(){return!0}}})(),i})()));
//esm-shim-webpack-plugin-exports

//# sourceMappingURL=platform-api.min.js.map